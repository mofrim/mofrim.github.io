<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="index, follow" name=robots><link href=https://digitalcourage.social/@mofrim rel=me><link href=https://mofrim.codeberg.page/rss.xml rel=alternate title=RSS type=application/rss+xml><title> | Painfully migrating to a new matrix account</title><link as=style href=https://mofrim.codeberg.page/css/style.css rel=preload><link crossorigin href=https://raw.githack.com/Speyll/suCSS/main/reset-min.css rel=stylesheet><link crossorigin href=https://raw.githack.com/Speyll/suCSS/main/suCSS-min.css rel=stylesheet><link href=https://mofrim.codeberg.page/css/style.css rel=stylesheet><link href=https://mofrim.codeberg.page/css/custom.css rel=stylesheet><link href=https://mofrim.codeberg.page/favicon.ico rel=icon><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y rel=stylesheet><script crossorigin defer integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js></script><script crossorigin defer integrity=sha384-zWYbd0NBwgTsgIdFKVprSfTh1mbMPe5Hz1X3yY4Sd1h/K1cQoUe36OGwAGz/PcDy src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/mathtex-script-type.min.js></script><script crossorigin defer integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe onload=renderMathInElement(document.body); src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js></script><link crossorigin href=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y rel=stylesheet><body><nav id=nav-bar>-- <a href=/> /home </a> -- <a href=/about> /about </a> -- <a href=/journal> /journal </a> -- <a href=/blog> /blog </a> -- <div aria-label="Toggle theme" class=theme-toggle data-icon-base=https://mofrim.codeberg.page/icons.svg data-icon-dark=#darkMode data-icon-light=#lightMode data-sound-src=https://mofrim.codeberg.page/click.ogg id=theme-toggle role=button tabindex=0><svg class=icon><use id=theme-icon></use></svg></div></nav><main><article class=post><header class=post-header><time datetime=2025-12-28>Published on: <span class=accent-data>2025-12-28</span> </time><address rel=author>By <span class=accent-data>mofrim</span></address><h1>Painfully migrating to a new matrix account</h1></header><div class=post-content><p>Ouff!<p>After the 2 cloudflare-outages this year, which led to me not being able to access any of my matrix-chats (as i my account was @matrix.org) i was happy to having found a new matrix-homeserver @fsfe.org since i became a supporter this year. But‚Ä¶<p><em><strong>How painful can it be to migrate to a new account?!</strong></em><p>I mean, the data is all there. But as i am trying to be a dev myself i fully understand that certain feature are just not top-priority for the matrix-element-team. So, here is what i did following <a href=https://finnes.dev/blog/2024/10-06-migrate-your-existing-matrix-account-the-harder-but-safe-way/ rel=noopener target=_blank>this</a> lovely tutorial by someone who went through the same painful experience before me.<ol><li><p>Create new account <code>@blabla:newhome.org</code> (old account: <code>@blabla:oldhome.org</code>).</p><li><p>In direct message rooms, or rooms where you are allowed to enter <code>/</code>-commands at the msg-prompt enter <code>/invite @blabla:oldhome.org Account Migration</code> logged in in your old account. This simply makes inviting you new self faster, imho. If you are not allowed to execute commands you have to click an invitation or copy the room link and open it in another Matrix instance where you logged in with your new account.</p><li><p>After accepting the invitation from your new account, in direct msg / or rooms where your old account is admin run <code>/op @blabla:fsfe.org 100</code></p><li><p>Make your old account leave the rooms where the new account now has successfully joined by running <code>/part</code> or clicking on <strong>Leave Room</strong>.</p><li><p>Sadly, the DM (DirectMessages) chats will now be group chats, as there temporarily have been more than 2 participants. In order to fix that run <code>/devtools</code> copy the internal room link, go to <code>Explore account data -> m.direct</code>. There you might find json that looks like this:</p> <pre class=language-json data-lang=json style=color:#f8f8f2;background-color:#282a36><code class=language-json data-lang=json><span> {
</span><span>   </span><span style=color:#eee>"</span><span style=color:#f1fa8c>@blabla:newhome.org</span><span style=color:#eee>"</span><span>: [],
</span><span>   </span><span style=color:#eee>"</span><span style=color:#f1fa8c>@blabla:oldhome.org</span><span style=color:#eee>"</span><span>: [
</span><span>     </span><span style=color:#eee>"</span><span style=color:#f1fa8c>!BzgPnypAbKBhxTLlFI:matrix.org</span><span style=color:#eee>"
</span><span>   ]
</span><span> }
</span></code></pre> <p>According to the <a href=https://spec.matrix.org/v1.4/client-server-api/#mdirect rel=noopener target=_blank>Matrix Spec</a> the <code>m.direct</code> spec is a map storing information about which rooms are considered DM-rooms. So all we need to do here is add the room ID of the DM-chat to the list of DM-rooms belonging to the newhome-account. Say, <code>!TzgPyzpAbKbhxTplfI:matrix.org</code> is the current DM-chat-roomlink then the result after editing should look like this (also did cleanup the oldhome stuff):</p> <pre class=language-json data-lang=json style=color:#f8f8f2;background-color:#282a36><code class=language-json data-lang=json><span> {
</span><span>   </span><span style=color:#eee>"</span><span style=color:#f1fa8c>@blabla:newhome.org</span><span style=color:#eee>"</span><span>: [
</span><span>     </span><span style=color:#eee>"</span><span style=color:#f1fa8c>!TzgPyzpAbKbhxTplfI:matrix.org</span><span style=color:#eee>"</span><span>,
</span><span>     </span><span style=color:#eee>"</span><span style=color:#f1fa8c>!BzgPnypAbKBhxTLlFI:matrix.org</span><span style=color:#eee>"
</span><span>   ]
</span><span> }
</span></code></pre> <p>This is about it. <code>TODO:</code> I would really love to write a script for that. Or some other tool making this simpler. Maybe some day üêß</p></ol></div><footer class=post-tags><small>tags: <a class=mytag href=/tags/foss>@foss </a> </small></footer></article></main><footer><hr><div id=footer-container><p style=font-size:10px>--( btw, this site was made using a modified version of <a rel="noopener noreferrer" href=https://github.com/Speyll/anemone target=_blank>anemone</a> Zola theme )--</div></footer><script defer src=https://mofrim.codeberg.page/js/script.js></script>